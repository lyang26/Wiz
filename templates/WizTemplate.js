!function e(t,l,a){function n(d,i){if(!l[d]){if(!t[d]){var u="function"==typeof require&&require;if(!i&&u)return u(d,!0);if(o)return o(d,!0);var s=new Error("Cannot find module '"+d+"'");throw s.code="MODULE_NOT_FOUND",s}var r=l[d]={exports:{}};t[d][0].call(r.exports,function(e){var l=t[d][1][e];return n(l?l:e)},r,r.exports,e,t,l,a)}return l[d].exports}for(var o="function"==typeof require&&require,d=0;d<a.length;d++)n(a[d]);return n}({1:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var n=e("./common/env"),o=a(n),d=e("./common/const"),i=(a(d),e("./common/lang")),u=(a(i),e("./utils/utils.js")),s=(a(u),e("./utils/insertImgUtils")),r=a(s),f=e("./template/base"),c=a(f),m={init:function(e){return o["default"].setDoc(e.document||window.document),o["default"].client.setType(e.clientType),i.initLang(e.lang),m},on:function(e){return c["default"].getTemplate()&&c["default"].on(e),m},off:function(){return c["default"].off(),m},focus:function(){return c["default"].focus(),m},getTemplate:function(){return c["default"].getTemplate()},hideTemplate:function(){return c["default"].hideElement(),m},hideTemplateFormHtml:function(e){return c["default"].hideElementFromHtml(e)},img:{insertByPath:function(e,t){r["default"].insertByPath(e,t)}},setContenteditable:function(e){return c["default"].setContenteditable(e),m},version:"0.1.0"};window.WizTemplate=m},{"./common/const":2,"./common/env":3,"./common/lang":4,"./template/base":5,"./utils/insertImgUtils":8,"./utils/utils.js":15}],2:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var a="wiz-template-",n={Attr:{TemplateFormat:"data-template-format",TemplateName:"data-template-name",SelectBind:"data-select-bind",SelectLayer:"data-select-layer",MenuBind:"data-menu-bind",MenuLayer:"data-menu-layer",TemplateVersion:"data-template-version",OptionAction:"data-option-action",ClientType:"data-template-client",Placeholder:"data-template-placeholder",DateValue:"data-template-date-value"},Class:{Client:{Android:a+"client-android",Ios:a+"client-ios",Mac:a+"client-mac",Web:a+"client-web",Win:a+"client-win",Pc:a+"client-pc",Phone:a+"client-phone"},Active:"active",Common:a+"node",Date:a+"date",DateContainer:a+"date-container",DateInputTmpTag:a+"date-input-container",DateInput:a+"date-input",Editable:a+"editable",FloatLayer:a+"floatLayer",Focus:a+"focus",Hide:a+"hide",InsertImg:a+"insert-img",Option:a+"option",Select:a+"select",SelectBtn:a+"select-btn",Menu:a+"menu",MenuBtn:a+"menu-btn",Diary:{blue:"mood-blue",purple:"mood-purple",green:"mood-green",red:"mood-red",sun:"weather-sun",wind:"weather-wind",rain:"weather-rain",snow:"weather-snow",mood:"mood",weather:"weather"},TodoImg:"wiz-todo-img",Sudoku:{index:a+"sudoku-index",indexHide:"sudoku-index-hide",content:a+"sudoku-content",grid:"sudoku-grid",aniDiV:"sudoku-animation",btn:a+"sudoku-btn",indexBtn:"sudoku-btn-index",nextBtn:"sudoku-btn-next",previousBtn:"sudoku-btn-previous"}},Id:{TemplateInfo:a+"info",TemplateInsertImgPre:a+"insert-img"},EVENT:{InsertImg:"wizTemplateInsertImg",setStyle:"wizTemplateSetStyle"},DiaryStyle:{bgColor:{blue:"#e0f5fc",purple:"#eee6f5",green:"#e3f6e3",red:"#fae7ea"}},NAME:{TMP_STYLE:"wiz_tmp_editor_style"},TAG:{TMP_TAG:"wiz_tmp_tag"}};l["default"]=n,t.exports=l["default"]},{}],3:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=e("./const"),o=a(n),d="wiznotecmd://",i={win:null,doc:null,setDoc:function(e){e&&(i.doc=e,i.win=i.doc.defaultView)},client:{clientType:"windows",type:{isWeb:function(){return location&&0===location.protocol.indexOf("http")}(),isWin:!1,isMac:!1,isIOS:!1,isAndroid:!1,isPad:!1,isPhone:!1},sendCmdToWiznote:function(e,t){},setType:function(e){e&&(e=e.toLowerCase(),e.indexOf("windows")>-1||e.indexOf("win")>-1?(i.client.type.isWin=!0,i.client.clientType="windows"):e.indexOf("ios")>-1?(i.client.type.isIOS=!0,i.client.clientType="ios",i.client.sendCmdToWiznote=function(e,t){var l="";e==o["default"].EVENT.InsertImg?l=d+e+"?userInfo="+encodeURIComponent(t.userInfo)+"&message="+encodeURIComponent(t.message)+"&cameraOnly="+t.cameraOnly:e==o["default"].EVENT.setStyle&&(l=d+e+"?bgColor="+encodeURIComponent(t.bgColor)+"&titleColor="+encodeURIComponent(t.titleColor)+"&folderColor="+encodeURIComponent(t.folderColor)+"&lineColor="+encodeURIComponent(t.lineColor));var a=i.doc.createElement("iframe");a.setAttribute("src",l),i.doc.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null}):e.indexOf("android")>-1?(i.client.type.isAndroid=!0,i.client.clientType="android",i.client.sendCmdToWiznote=function(e,t){}):e.indexOf("mac")>-1?(i.client.type.isMac=!0,i.client.clientType="mac"):e.indexOf("web")>-1&&(i.client.type.isWeb=!0,i.client.clientType="web"),(i.client.type.isIOS||i.client.type.isAndroid)&&(e.indexOf("pad")>-1?i.client.type.isPad=!0:i.client.type.isPhone=!0))}}};l["default"]=i,t.exports=l["default"]},{"./const":2}],4:[function(e,t,l){"use strict";function a(e){e||(e="en"),e=e.toLowerCase().replace("_","-"),n[e]?o=e:e="en";var t;for(t in n[e])n[e].hasOwnProperty(t)&&(d[t]=n[e][t])}Object.defineProperty(l,"__esModule",{value:!0});var n={},o="en",d={};n.en={weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},n["zh-cn"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},n["zh-tw"]={weeks:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},l["default"]=d;var i=function(e){a(e)};l.initLang=i},{}],5:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=e("../common/env"),o=a(n),d=e("../common/const"),i=a(d),u=e("../utils/utils"),s=a(u),r=e("../utils/insertImgUtils.js"),f=a(r),c=e("../utils/dateUtils.js"),m=a(c),p=e("../utils/selectUtils.js"),y=a(p),C=e("../utils/todoPatch.js"),v=a(C),h=e("../utils/menuUtils.js"),g=a(h),b=e("../utils/sudokuUtils.js"),S=a(b),w=e("../utils/placeHolederUtils.js"),T=a(w),A=e("../utils/snowUtils.js"),E=a(A),I=e("../template/wizStyle"),x=a(I),k={on:function(e){x["default"].initBody(e),E["default"].on(),S["default"].on(e),e||(k.showElement(),k.bind(),f["default"].on(),m["default"].on(e),y["default"].on(),v["default"].on(),g["default"].on(),T["default"].on())},off:function(){k.hideElement(),k.unbind(),f["default"].off(),m["default"].off(),y["default"].off(),v["default"].off(),g["default"].off(),S["default"].off(),E["default"].off()},bind:function(){},unbind:function(){},focus:function(){var e=o["default"].doc.querySelector("."+i["default"].Class.Focus);e?e.focus():(o["default"].client.type.isAndroid&&0===o["default"].doc.body.scrollTop||!o["default"].client.type.isAndroid)&&o["default"].doc.body.focus()},getTemplate:function(){var e=o["default"].doc.querySelector("#"+i["default"].Id.TemplateInfo);return e?{name:e.getAttribute(i["default"].Attr.TemplateName),version:e.getAttribute(i["default"].Attr.TemplateVersion)}:null},hideElement:function(){var e,t,l=s["default"].getTemplateElements();if(l)for(e=0,t=l.length;t>e;e++)s["default"].addClass(l[e],i["default"].Class.Hide)},hideElementFromHtml:function(e){var t=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/i,l=/(<[^<> ]*[^<>]* class[ ]*=[ ]*['"])([^'"]*)(['"])/gi;if(!t.test(e))return e;for(var a,n,o,d=[],u=0;a=l.exec(e);){if(n=a[2],(" "+n+" ").indexOf(" "+i["default"].Class.FloatLayer+" ")>-1)o=new RegExp(" "+i["default"].Class.Active+" ","ig"),n=s["default"].trim((" "+n+" ").replace(o,""));else{if(-1===(" "+n+" ").indexOf(" "+i["default"].Class.Common+" ")){d.push(e.substr(u,a.index-u),a[0]),u=a.index+a[0].length;continue}-1===(" "+n+" ").indexOf(" "+i["default"].Class.Hide+" ")&&(n+=" "+i["default"].Class.Hide)}d.push(e.substr(u,a.index-u),a[1],n,a[3]),u=a.index+a[0].length}return d.push(e.substr(u)),d.join("")},setContenteditable:function(e){var t,l,a=o["default"].doc.querySelectorAll("."+i["default"].Class.Editable);if(0===a.length)o["default"].doc.body.setAttribute("contenteditable",e?"true":"false");else for(e&&o["default"].doc.body.setAttribute("contenteditable","false"),t=0,l=a.length;l>t;t++)a[t].setAttribute("contenteditable",e?"true":"false")},showElement:function(){var e,t,l,a=s["default"].getTemplateElements();if(a)for(e=0,t=a.length;t>e&&(l=a[e].getAttribute(i["default"].Attr.ClientType),!(l&&l.indexOf(o["default"].client.clientType)>0));e++)s["default"].removeClass(a[e],i["default"].Class.Hide)}};l["default"]=k,t.exports=l["default"]},{"../common/const":2,"../common/env":3,"../template/wizStyle":6,"../utils/dateUtils.js":7,"../utils/insertImgUtils.js":8,"../utils/menuUtils.js":9,"../utils/placeHolederUtils.js":10,"../utils/selectUtils.js":11,"../utils/snowUtils.js":12,"../utils/sudokuUtils.js":13,"../utils/todoPatch.js":14,"../utils/utils":15}],6:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var n=e("../common/env"),o=a(n),d=e("../common/const"),i=a(d),u=e("../utils/utils"),s=a(u),r={common:".date, .wiz-template-data-container {position:relative}.wiz-template-client-pc .wiz-template-date-input-container {background:white;padding-top:8px;position:absolute;top:0;left:0;bottom:0;right:0;}.wiz-template-client-phone .wiz-template-date-input {position:absolute;top:0;left:0;bottom:0;right:0;opacity:0;}"},f={common:""},c={insertStyle:function(e,t){var l=o["default"].doc.createElement("style");return e.name&&l.setAttribute("name",e.name),e.id&&(l.setAttribute("id",e.id),c.removeStyleById(e.id)),o["default"].doc.getElementsByTagName("HEAD")[0].insertBefore(l,null),l.innerHTML=t,l},insertTmpEditorStyle:function(){c.insertStyle({name:i["default"].NAME.TMP_STYLE},r.common)},insertTmpReaderStyle:function(){c.insertStyle({name:i["default"].NAME.TMP_STYLE},f.common)},initBody:function(e){s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Android),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Ios),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Mac),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Web),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Win),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Pc),s["default"].removeClass(o["default"].doc.body,i["default"].Class.Client.Phone);var t=o["default"].client.type.isAndroid||o["default"].client.type.isIOS?i["default"].Class.Client.Phone:i["default"].Class.Client.Pc;t+=" ",o["default"].client.type.isAndroid?t+=i["default"].Class.Client.Android:o["default"].client.type.isIOS?t+=i["default"].Class.Client.Ios:o["default"].client.type.isMac?t+=i["default"].Class.Client.Mac:o["default"].client.type.isWeb?t+=i["default"].Class.Client.Web:o["default"].client.type.isWin&&(t+=i["default"].Class.Client.Win),s["default"].addClass(o["default"].doc.body,t),e?c.insertTmpReaderStyle():c.insertTmpEditorStyle()}};t.exports=c},{"../common/const":2,"../common/env":3,"../utils/utils":15}],7:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!t)return"";var l=o(e.getFullYear(),4),a=o(e.getMonth()+1,2),n=o(e.getDate(),2),d=m["default"].weeks[e.getDay()];return t.replace(/yyyy/gi,l).replace(/mm/gi,a).replace(/dd/gi,n).replace(/ww/gi,d)}function o(e,t){for(e+="";e.length<t;)e="0"+e;return e}Object.defineProperty(l,"__esModule",{value:!0});var d,i,u=e("../common/env"),s=a(u),r=e("../common/const"),f=a(r),c=e("../common/lang"),m=a(c),p=e("./utils"),y=a(p),C={on:function(e){if(!e){var t=0;s["default"].client.type.isWin&&(t=500),setTimeout(function(){v.init(),h.bind()},t)}},off:function(){h.unbind()}},v={init:function(){return d=s["default"].doc.querySelector("."+f["default"].Class.DateContainer),i=s["default"].doc.querySelectorAll("."+f["default"].Class.Date),0===i.length?void(d=null):(d||(d=i[0].parentNode.parentNode,y["default"].hasClass(d,"date")||(d=null)),void(d&&d.getAttribute(f["default"].Attr.DateValue)||v.setDateList(new Date)))},initInput:function(){var e=parseInt(d.getAttribute(f["default"].Attr.DateValue),10);if(e&&!isNaN(e)){var t=new Date(e);v.showTmpTag(t)}},setDateList:function(e){if(e){var t,l,a;for(t=0,l=i.length;l>t;t++)a=i[t],a.innerHTML=n(e,a.getAttribute(f["default"].Attr.TemplateFormat));d&&d.setAttribute(f["default"].Attr.DateValue,e.valueOf())}},tmpTagIsShow:function(){var e=d.querySelector("."+f["default"].Class.DateInputTmpTag);return e?"none"!==e.style.display:!1},hideTmpInput:function(){if(!s["default"].client.type.isIOS&&!s["default"].client.type.isAndroid){var e=d.querySelector("."+f["default"].Class.DateInputTmpTag),t=d.querySelector("."+f["default"].Class.DateInput);e&&t&&(e.style.opacity=0,t.style.opacity=0)}},showTmpInput:function(){if(!s["default"].client.type.isIOS&&!s["default"].client.type.isAndroid){var e=d.querySelector("."+f["default"].Class.DateInputTmpTag),t=d.querySelector("."+f["default"].Class.DateInput);e&&t&&(e.style.opacity=1,t.style.opacity=1,t.focus())}},hideTmpTag:function(){if(!s["default"].client.type.isIOS&&!s["default"].client.type.isAndroid){var e=d.querySelector("."+f["default"].Class.DateInputTmpTag);e&&(e.style.display="none")}},showTmpTag:function(e){var t,l=d.querySelector("."+f["default"].Class.DateInputTmpTag);l?(t=d.querySelector("input"),l.style.display="block"):(l=s["default"].doc.createElement(f["default"].TAG.TMP_TAG),t=s["default"].doc.createElement("input"),t.setAttribute("type","date"),y["default"].addClass(l,f["default"].Class.DateInputTmpTag),y["default"].addClass(t,f["default"].Class.DateInput),l.appendChild(t),d.appendChild(l),y["default"].bind(t,"change",h.handler.onChange),y["default"].bind(t,"blur",h.handler.onBlur)),t.value=n(e,"yyyy-mm-dd"),v.showTmpInput()}},h={bind:function(){d&&(s["default"].client.type.isIOS||s["default"].client.type.isAndroid?v.initInput():y["default"].bind(s["default"].doc.body,"click",h.handler.onClick))},unbind:function(){y["default"].unbind(d,"click",h.handler.onClick)},handler:{onBlur:function(){v.hideTmpInput()},onClick:function(e){var t,l=e.target||event.srcElement;v.tmpTagIsShow()?y["default"].hasClass(l,f["default"].Class.DateInput)||v.hideTmpTag():(t=y["default"].getParentByFilter(l,function(e){return y["default"].hasClass(e,f["default"].Class.DateContainer)}),t&&v.initInput())},onChange:function(e){var t,l=e.target||event.srcElement;l.value&&(t=new Date(l.value),v.setDateList(t)),v.hideTmpTag()}}};l["default"]=C,t.exports=l["default"]},{"../common/const":2,"../common/env":3,"../common/lang":4,"./utils":15}],8:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return m["default"].hasClass(e,f["default"].Class.InsertImg)}function o(e){var t,l=e.target||e.srcElement,a=m["default"].getParentByFilter(l,n);a&&(l.id||(l.id=f["default"].Id.TemplateInsertImgPre+(new Date).valueOf()),t={id:l.id},s["default"].client.sendCmdToWiznote(f["default"].EVENT.InsertImg,{userInfo:JSON.stringify(t),message:"模板插入图片",cameraOnly:"true"}))}function d(e,t,l){if(e){var a,n;if(m["default"].isArray(e))for(a=0,n=e.length;n>a;a++)t.insertBefore(e[a],l);else t.insertBefore(e,l)}}function i(e){var t,l,a,n,o=[],d=[];for(e.indexOf("*")?d=e.split("*"):d.push(e),a=0,n=d.length;n>a;a++)t=s["default"].doc.createElement("div"),o.push(t),l=s["default"].doc.createElement("img"),l.src=d[a],l.style.maxWidth="100%",t.insertBefore(l,null);return t=s["default"].doc.createElement("div"),t.insertBefore(s["default"].doc.createElement("br"),null),o.push(t),o}Object.defineProperty(l,"__esModule",{value:!0});var u=e("../common/env.js"),s=a(u),r=e("../common/const.js"),f=a(r),c=e("./utils.js"),m=a(c),p={on:function(){p.off(),m["default"].bind(s["default"].doc.body,"click",o)},off:function(){m["default"].unbind(s["default"].doc.body,"click",o)},insertByPath:function(e,t){t?"string"==typeof t&&(t=decodeURIComponent(t),t=JSON.parse(t)):t={};var l=s["default"].doc.getElementById(t.id),a=l&&l!=s["default"].doc.body?l.parentNode:s["default"].doc.body;d(i(e),a,l||null)}};l["default"]=p,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],9:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return v["default"].hasClass(e,y["default"].Class.MenuBtn)||v["default"].hasClass(e,y["default"].Class.Option)}function o(e){return v["default"].hasClass(e,y["default"].Class.Menu)}function d(e){return v["default"].hasClass(e,y["default"].Class.FloatLayer)}function i(e){var t,l,a=e.target||e.srcElement,o=v["default"].getParentByFilter(a,n);if(o&&v["default"].hasClass(o,y["default"].Class.MenuBtn)){if(t=o.getAttribute(y["default"].Attr.MenuLayer),!t)return;if(l=m["default"].doc.getElementById(t),!l)return;v["default"].hasClass(l,y["default"].Class.Active)||(h=v["default"].getTemplateRange())}}function u(e){var t,l,a,d,i=e.target||e.srcElement,u=v["default"].getParentByFilter(i,n);if(u&&v["default"].hasClass(u,y["default"].Class.MenuBtn)){if(a=u.getAttribute(y["default"].Attr.MenuLayer),!a)return;if(d=m["default"].doc.getElementById(a),!d)return;v["default"].hasClass(d,y["default"].Class.Active)?(v["default"].removeClass(d,y["default"].Class.Active),v["default"].removeClass(u,y["default"].Class.Active),v["default"].setTemplateRange(h),f()):(v["default"].addClass(d,y["default"].Class.Active),v["default"].addClass(u,y["default"].Class.Active),r())}else if(u){if(t=v["default"].getParentByFilter(i,o),!t)return;if(v["default"].hasClass(u,y["default"].Class.Active))return;l=m["default"].doc.querySelector("."+y["default"].Class.MenuBtn),l.innerHTML=u.innerHTML,a=l.getAttribute(y["default"].Attr.MenuLayer),d=m["default"].doc.getElementById(a),v["default"].removeClass(d,y["default"].Class.Active),v["default"].removeClass(l,y["default"].Class.Active)}}function s(e){var t=e.target||e.srcElement,l=v["default"].getParentByFilter(t,n);l||(l=v["default"].getParentByFilter(t,d));var a,o,i;if(!l){for(a=m["default"].doc.querySelectorAll("."+y["default"].Class.FloatLayer+"."+y["default"].Class.Active),o=0,i=a.length;i>o;o++)v["default"].removeClass(a[o],y["default"].Class.Active);f()}}function r(){m["default"].client.type.isPhone?v["default"].bind(m["default"].doc.body,"touchstart",s):v["default"].bind(m["default"].doc.body,"click",s)}function f(){m["default"].client.type.isPhone?v["default"].unbind(m["default"].doc.body,"touchstart",s):v["default"].unbind(m["default"].doc.body,"click",s)}Object.defineProperty(l,"__esModule",{value:!0});var c=e("../common/env.js"),m=a(c),p=e("../common/const.js"),y=a(p),C=e("./utils.js"),v=a(C),h=null,g={on:function(){g.off(),v["default"].bind(m["default"].doc.body,m["default"].client.type.isPhone?"touchstart":"mousedown",i),v["default"].bind(m["default"].doc.body,"click",u)},off:function(){v["default"].unbind(m["default"].doc.body,m["default"].client.type.isPhone?"touchstart":"mousedown",i),v["default"].unbind(m["default"].doc.body,"click",u)}};l["default"]=g,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],10:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){r["default"].bind(e,"focus",function(){e.textContent.trim()||(e.textContent=e.getAttribute(u["default"].Attr.Placeholder))}),r["default"].bind(e,"blur",function(){e.textContent.trim()==e.getAttribute(u["default"].Attr.Placeholder)&&(e.textContent="")})}Object.defineProperty(l,"__esModule",{value:!0});var o=e("../common/env.js"),d=a(o),i=e("../common/const.js"),u=a(i),s=e("./utils.js"),r=a(s),f={on:function(){f.off();var e=d["default"].doc.querySelectorAll(".wiz-template-placeholder");if(e.length)for(var t=0,l=e.length;l>t;t++)n(e[t])},off:function(){}};l["default"]=f,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],11:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return g["default"].hasClass(e,v["default"].Class.SelectBtn)||g["default"].hasClass(e,v["default"].Class.Option)}function o(e){return g["default"].hasClass(e,v["default"].Class.Select)}function d(e){return g["default"].hasClass(e,v["default"].Class.FloatLayer)}function i(e){var t,l,a=e.target||e.srcElement,o=g["default"].getParentByFilter(a,n);if(o&&g["default"].hasClass(o,v["default"].Class.SelectBtn)){if(t=o.getAttribute(v["default"].Attr.SelectLayer),!t)return;if(l=y["default"].doc.getElementById(t),!l)return;g["default"].hasClass(l,v["default"].Class.Active)||(b=g["default"].getTemplateRange())}}function u(e){var t,l,a,d=e.target||e.srcElement,i=g["default"].getParentByFilter(d,n);if(i&&g["default"].hasClass(i,v["default"].Class.SelectBtn)){if(l=i.getAttribute(v["default"].Attr.SelectLayer),!l)return;if(a=y["default"].doc.getElementById(l),!a)return;g["default"].hasClass(a,v["default"].Class.Active)?(g["default"].removeClass(a,v["default"].Class.Active),y["default"].doc.querySelector(".layer-mask")&&g["default"].removeClass(y["default"].doc.querySelector(".layer-mask"),v["default"].Class.Active),g["default"].setTemplateRange(b),f()):(g["default"].addClass(a,v["default"].Class.Active),y["default"].doc.querySelector(".layer-mask")&&g["default"].addClass(y["default"].doc.querySelector(".layer-mask"),v["default"].Class.Active),r())}else if(i){if(t=g["default"].getParentByFilter(d,o),!t)return;if(g["default"].hasClass(i,v["default"].Class.Active))return;if(g["default"].hasClass(i.parentNode,v["default"].Class.Diary.mood)){if(g["default"].removeClass(y["default"].doc.body,v["default"].Class.Diary.blue),g["default"].removeClass(y["default"].doc.body,v["default"].Class.Diary.green),g["default"].removeClass(y["default"].doc.body,v["default"].Class.Diary.purple),g["default"].removeClass(y["default"].doc.body,v["default"].Class.Diary.red),g["default"].addClass(y["default"].doc.body,i.querySelector("i").className),y["default"].doc.querySelector("."+v["default"].Class.Sudoku.content))return;m(i.querySelector("i").className)}else if(g["default"].hasClass(i.parentNode,v["default"].Class.Diary.weather)){if(y["default"].doc.querySelector("i."+v["default"].Class.Diary.weather).className=v["default"].Class.Diary.weather+" "+i.querySelector("i").className,y["default"].doc.querySelector(".weather-animation")&&(y["default"].doc.querySelector(".weather-animation").className="weather-animation "+i.querySelector("i").className),y["default"].doc.querySelector("."+v["default"].Class.Sudoku.content))return;c(i.querySelector("i").className)}}}function s(e){var t=e.target||e.srcElement,l=g["default"].getParentByFilter(t,n);l||(l=g["default"].getParentByFilter(t,d));var a,o,i;if(!l){for(a=y["default"].doc.querySelectorAll("."+v["default"].Class.FloatLayer+"."+v["default"].Class.Active),o=0,i=a.length;i>o;o++)g["default"].removeClass(a[o],v["default"].Class.Active);y["default"].doc.querySelector(".layer-mask")&&g["default"].removeClass(y["default"].doc.querySelector(".layer-mask"),v["default"].Class.Active),f()}}function r(){y["default"].client.type.isPhone||y["default"].client.type.isPad?g["default"].bind(y["default"].doc.body,"touchstart",s):g["default"].bind(y["default"].doc.body,"click",s)}function f(){y["default"].client.type.isPhone||y["default"].client.type.isPad?g["default"].unbind(y["default"].doc.body,"touchstart",s):g["default"].unbind(y["default"].doc.body,"click",s)}function c(e){var t,l;l=e.split("-"),l.length&&l.length>0&&(t=l[l.length-1],y["default"].doc.getElementById(v["default"].Id.TemplateInfo).setAttribute("data-template-weather",t))}function m(e){var t,l,a,n=v["default"].DiaryStyle.bgColor;if(a=e.split("-"),a.length&&a.length>0){t=a[a.length-1];for(var o in n)if(t==o){l=n[o],y["default"].doc.getElementById(v["default"].Id.TemplateInfo).setAttribute("data-template-bgcolor",l);break}y["default"].client.sendCmdToWiznote(v["default"].EVENT.setStyle,{bgColor:l,titleColor:"",folderColor:"",lineColor:""})}g["default"].modifyHtmlForPC()}Object.defineProperty(l,"__esModule",{value:!0});var p=e("../common/env.js"),y=a(p),C=e("../common/const.js"),v=a(C),h=e("./utils.js"),g=a(h),b=null,S={on:function(){S.off(),g["default"].bind(y["default"].doc.body,y["default"].client.type.isPhone||y["default"].client.type.isPad?"touchstart":"mousedown",i),g["default"].bind(y["default"].doc.body,"click",u)},off:function(){g["default"].unbind(y["default"].doc.body,y["default"].client.type.isPhone||y["default"].client.type.isPad?"touchstart":"mousedown",i),g["default"].unbind(y["default"].doc.body,"click",u)}};l["default"]=S,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],12:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=e("../common/env.js"),o=a(n),d=e("../common/const.js"),i=(a(d),e("./utils.js")),u=(a(i),[]),s=null,r={on:function(){r.off();var e=r.getSnowDiv();if(e){var t=o["default"].doc.querySelectorAll("div.hide img");t.length&&(u=t,e.innerHTML="",f.f=!0,f.createSnow("index_files/",30))}},off:function(){f.destorySnow(),f.f=!1;var e=o["default"].doc.querySelector("div.weather-animation.weather-snow");e&&(e.innerHTML="")},getSnowDiv:function(){return o["default"].doc.querySelector("div.weather-animation.weather-snow")}},f={play:!0,k:function(e,t,l){e.addEventListener?e.addEventListener(t,l,!1):e.attachEvent&&e.attachEvent("on"+t,l)},g:function(e){if("function"!=typeof window.onload)window.onload=e;else{var t=window.onload;window.onload=function(){t(),e()}}},h:function(){var e={};for(var t in{Top:"",Left:""}){var l="Top"==t?"Y":"X";"undefined"!=typeof window["page"+l+"Offset"]?e[t.toLowerCase()]=window["page"+l+"Offset"]:(l=document.documentElement.clientHeight?document.documentElement:document.body,e[t.toLowerCase()]=l["scroll"+t])}return e},l:function(){var e,t=document.querySelector("div.weather-animation");return window.innerHeight?e=window.innerHeight:t.parentElement.clientHeight?e=t.parentElement.clientHeight:t&&t.clientHeight&&(e=t.clientHeight),e},i:function(e){this.parent=o["default"].doc.querySelector("div.weather-animation"),this.parent&&(this.createEl(this.parent,e),this.size=5*Math.random()+5,this.el.style.width=Math.round(this.size)+"px",this.el.style.height=Math.round(this.size)+"px",this.maxLeft=o["default"].doc.querySelector("div.weather-animation").offsetWidth-this.size,this.maxTop=o["default"].doc.querySelector("div.weather-animation").offsetHeight-this.size,this.left=Math.random()*this.maxLeft,this.top=0,this.angle=1.4+.2*Math.random(),this.minAngle=1.4,this.maxAngle=1.6,this.angleDelta=.01*Math.random(),this.speed=2+Math.random())},f:!0,destorySnow:function(){s&&clearInterval(s)},createSnow:function(e,t){var l=[];s&&clearInterval(s),s=setInterval(function(){var a=r.getSnowDiv();if(a||clearInterval(s),f.f&&t>l.length&&Math.random()<.005*t){var n=new f.i(e);n.parent?l.push(n):clearInterval(s)}f.f||l.length||clearInterval(s);for(var o=document.querySelector("div.weather-animation"),d=f.h().top,i=f.l(),u=l.length-1;o&&u>=0;u--)l[u]&&(l[u].top>o.offsetHeight-10||l[u].top+l[u].size+1>d+i?(l[u].top=0,l[u].left=Math.random()*l[u].maxLeft,l[u].setSrc()):(l[u].move(),l[u].draw()))},40),f.k(window,"scroll",function(){for(var e=l.length-1;e>=0;e--)l[e].draw()})}};f.i.prototype={createEl:function(e,t){this.el=document.createElement("img"),this.setSrc(),this.el.style.position="absolute",this.el.style.display="block",this.el.style.zIndex="99999",this.el.className="no-lazyload",this.parent.appendChild(this.el)},setSrc:function(){var e=u[Math.floor(4*Math.random())],t=e.getAttribute("src")||e.getAttribute("data-src");t&&this.el.setAttribute("src",t)},move:function(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px"},remove:function(){this.el.parentNode&&this.parent.removeChild(this.el),this.parent=this.el=null}},l["default"]=r,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],13:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){return p["default"].client.type.isAndroid?void(window.WizNote&&window.WizNote.saveFakeCookie&&window.WizNote.saveFakeCookie(t)):void localStorage.setItem(e,t)}function o(e,t){return p["default"].client.type.isAndroid?void(window.WizNote&&window.WizNote.prepareCookie&&(window.getFakeCookie=function(e){t(e),window.getFakeCookie=null},window.WizNote.prepareCookie())):void t(localStorage.getItem(e))}function d(e){return h["default"].hasClass(e,C["default"].Class.Sudoku.grid)||h["default"].hasClass(e,C["default"].Class.Sudoku.indexBtn)||h["default"].hasClass(e,C["default"].Class.Sudoku.nextBtn)||h["default"].hasClass(e,C["default"].Class.Sudoku.previousBtn)}function i(e){var t,l,a=e.target||e.srcElement,o=h["default"].getParentByFilter(a,d),i=p["default"].doc.querySelector("."+C["default"].Class.Sudoku.nextBtn),r=p["default"].doc.querySelector("."+C["default"].Class.Sudoku.previousBtn);if(!o)return void u();if(!p["default"].doc.querySelector(".wiz-template-floatLayer.active")){if(h["default"].hasClass(o,C["default"].Class.Sudoku.grid)){if(h["default"].hasClass(p["default"].doc.body,C["default"].Class.Sudoku.indexHide))return;if(p["default"].client.type.isAndroid||p["default"].client.type.isIOS)p["default"].doc.body.scrollTop=0,h["default"].addClass(p["default"].doc.body,C["default"].Class.Sudoku.indexHide),h["default"].addClass(o,C["default"].Class.Active),o.previousElementSibling?h["default"].addClass(o.previousElementSibling,"previous"):h["default"].addClass(r,"unenable"),o.nextElementSibling?h["default"].addClass(o.nextElementSibling,"next"):h["default"].addClass(i,"unenable"),n("sudoku-active-grid",o.className.substr(12,5)),p["default"].doc.querySelector("body.for-quadrant")&&setTimeout(function(){h["default"].addClass(p["default"].doc.body,"animation")},200);else if(!c){if(h["default"].hasClass(o,g.isEditing))return;u(),f(),h["default"].addClass(o,g.gridEdit),h["default"].addClass(o,g.isEditing)}return void s(o.querySelector(".quadrant-content"))}if(t=p["default"].doc.querySelector("."+C["default"].Class.Sudoku.content+" .active")){if(h["default"].hasClass(o,C["default"].Class.Sudoku.indexBtn))t.nextElementSibling&&h["default"].removeClass(t.nextElementSibling,"next"),t.previousElementSibling&&h["default"].removeClass(t.previousElementSibling,"previous"),i&&h["default"].removeClass(i,"unenable"),r&&h["default"].removeClass(r,"unenable"),h["default"].removeClass(p["default"].doc.body,C["default"].Class.Sudoku.indexHide),u(),n("sudoku-active-grid",""),p["default"].doc.querySelector("body.for-quadrant")&&h["default"].removeClass(p["default"].doc.body,"animation");else if(h["default"].hasClass(o,C["default"].Class.Sudoku.nextBtn)){if(t==t.parentNode.lastChild)return;l=t.nextElementSibling,h["default"].addClass(t,"previous"),l!=l.parentNode.lastChild?h["default"].addClass(l.nextElementSibling,"next"):h["default"].addClass(i,"unenable"),h["default"].addClass(l,C["default"].Class.Active),n("sudoku-active-grid",l.className.substr(12,5)),t.previousElementSibling?h["default"].removeClass(t.previousElementSibling,"previous"):h["default"].removeClass(r,"unenable"),h["default"].removeClass(l,"next")}else if(h["default"].hasClass(o,C["default"].Class.Sudoku.previousBtn)){if(t==t.parentNode.firstChild)return void h["default"].addClass(r,"unenable");l=t.previousElementSibling,h["default"].addClass(t,"next"),l!=l.parentNode.firstChild?h["default"].addClass(l.previousElementSibling,"previous"):h["default"].addClass(r,"unenable"),h["default"].addClass(l,C["default"].Class.Active),n("sudoku-active-grid",l.className.substr(12,5)),t.nextElementSibling?h["default"].removeClass(t.nextElementSibling,"next"):h["default"].removeClass(i,"unenable"),h["default"].removeClass(l,"previous")}h["default"].removeClass(t,C["default"].Class.Active)}}
}function u(){var e=p["default"].doc.querySelectorAll(".quadrant-content");if(e.length)for(var t=0,l=e.length;l>t;t++)e[t].textContent.trim()||e[t].querySelector("img")?h["default"].addClass(e[t].parentNode,g.gridEdit):h["default"].hasClass(e[t].parentNode,g.gridEdit)&&(h["default"].removeClass(e[t].parentNode,g.gridEdit),h["default"].removeClass(e[t].parentNode,g.isEditing))}function s(e){e&&setTimeout(function(){e.focus();var t=p["default"].doc.getSelection();t.collapse(e,e.childNodes.length)},300)}function r(e){if(e){var t=p["default"].doc.querySelector("."+e);h["default"].addClass(p["default"].doc.body,C["default"].Class.Sudoku.indexHide),h["default"].addClass(t,"active"),s(t)}else h["default"].removeClass(p["default"].doc.body,"sudoku-index-hide")}function f(){var e=p["default"].doc.querySelectorAll("."+C["default"].Class.Sudoku.grid);if(e.length)for(var t=0,l=e.length;l>t;t++)h["default"].removeClass(e[t],C["default"].Class.Active),h["default"].removeClass(e[t],"previous"),h["default"].removeClass(e[t],"next"),h["default"].removeClass(e[t],g.isEditing);o("sudoku-active-grid",r)}Object.defineProperty(l,"__esModule",{value:!0});var c,m=e("../common/env.js"),p=a(m),y=e("../common/const.js"),C=a(y),v=e("./utils.js"),h=a(v),g={gridEdit:"quadrant-content-edit",isEditing:"editing"},b={on:function(e){c=e,b.off();var t=p["default"].doc.querySelector("."+C["default"].Class.Sudoku.content);if(t){h["default"].bind(p["default"].doc.body,"click",i),u(),p["default"].doc.body.scrollTop=0;var l=p["default"].doc.querySelector("#wiz-template-info").getAttribute("data-newnote");e?n("sudoku-active-grid",""):l&&(n("sudoku-active-grid",""),p["default"].doc.querySelector("#wiz-template-info").removeAttribute("data-newnote")),f()}},off:function(){h["default"].unbind(p["default"].doc.body,"click",i)}};l["default"]=b,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3,"./utils.js":15}],14:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=e("../common/const.js"),o=a(n),d=e("../common/env.js"),i=a(d),u={on:function(){var e,t,l=i["default"].doc.querySelectorAll("."+o["default"].Class.TodoImg);if(l)for(var a=0,n=l.length;n>a;a++){e=["wiz_todo"],t=[];for(var d=0;6>d;d++)t.push(Math.floor(10*Math.random()));e.push((new Date).getTime()+a),e.push(t.join("")),e.push(i["default"].doc.getElementById(o["default"].Id.TemplateInfo).getAttribute("data-templatename")),l[a].id||(l[a].id=e.join("_"))}},off:function(){}};l["default"]=u,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3}],15:[function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=e("../common/const.js"),o=a(n),d=e("../common/env.js"),i=a(d),u={bind:function(e,t,l){e&&(e.addEventListener?e.addEventListener(t,l,!1):(e["e"+l]=function(){l.call(e,window.event)},e.attachEvent("on"+t,e["e"+l])))},unbind:function(e,t,l){e&&(e.removeEventListener?e.removeEventListener(t,l,!1):e.detachEvent&&e.detachEvent("on"+t,e["e"+l]))},getTemplateElements:function(){return i["default"].doc.querySelectorAll("."+o["default"].Class.Common)},hasClass:function(e,t){return e?(" "+e.className+" ").indexOf(" "+t+" ")>-1:void 0},addClass:function(e,t){u.hasClass(e,t)||e&&(e.className=u.trim(e.className+" "+t))},removeClass:function(e,t){e&&(e.className=u.trim((" "+e.className+" ").replace(" "+t+" "," ")))},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getParentByFilter:function(e,t){if(!t)return e;if(e&&e!=i["default"].doc.body)for(;e;){if(t(e))return e;if(e==i["default"].doc.body)return null;e=e.parentNode}return null},getTemplateRange:function(){var e=document.getSelection();if(!e.rangeCount)return null;var t=e.getRangeAt(0);return{start:t.startContainer,startOffset:t.startOffset,end:t.endContainer,endOffset:t.endOffset}},setTemplateRange:function(e){if(e){var t=document.getSelection();t.collapse(e.start,e.startOffset),t.extend(e.end,e.endOffset)}},modifyHtmlForPC:function(){if(i["default"].client.type.isWin){var e=i["default"].doc.createElement("div");e.setAttribute("name",o["default"].NAME.TMP_STYLE),e.setAttribute("style","display:none"),i["default"].doc.body.appendChild(e)}}};l["default"]=u,t.exports=l["default"]},{"../common/const.js":2,"../common/env.js":3}]},{},[1]);